<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Union Strike Folk Song</title>
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>

<h1 id="title">Union Strike Folk Song</h1>

<video src="https://www.cs.tufts.edu/comp/20/butwehavethepower.mp4" id="butwehavethepower" controls></video>
<div id="lyrics"></div>

<script>
	// Complete this section and create a CSS file named style.css
	var subtitles = document.getElementById('subtitles');
	for (var i = 0; i < video.textTracks.length; i++) {
		viedo.textTracks = [];
		video.textTracks = ['Lisa: Come gather round, children',
		'It s high time ye learned',
		'Bout a hero named Homer',
		'And a devil named Burns.',

		'We ll march till we drop', 
		'The girls and the fellas.',
		'We ll fight till the death', 
		'Or else fold like umbrellas.',

		'So we ll march day and night',
		'By the big cooling tower.',
		'They have the plant',

		'But we have the power.',

		'Lenny: Now do "Classical Gas!" ',

		'So we ll march day and night',
		'By the big cooling tower.',
		'They have the plant',

		'But we have the power.' ]
   		video.textTracks[i].mode = 'hidden';
	}

	var subtitlesMenu;
	if (video.textTracks) {
   		var df = document.createDocumentFragment();
   		var subtitlesMenu = df.appendChild(document.createElement('ul'));
   		subtitlesMenu.className = 'subtitles-menu';
   		subtitlesMenu.appendChild(createMenuItem('subtitles-off', '', 'Off'));
   		for (var i = 0; i < video.textTracks.length; i++) {
      			subtitlesMenu.appendChild(createMenuItem('subtitles-' + video.textTracks[i].language, video.textTracks[i].language, video.textTracks[i].label));
   		}
   		videoContainer.appendChild(subtitlesMenu);
	}
	
	var subtitleMenuButtons = [];
	var createMenuItem = function(id, lang, label) {
	   var listItem = document.createElement('li');
	   var button = listItem.appendChild(document.createElement('button'));
	   button.setAttribute('id', id);
	   button.className = 'subtitles-button';
	   if (lang.length > 0) button.setAttribute('lang', lang);
	   button.value = label;
	   button.setAttribute('data-state', 'inactive');
	   button.appendChild(document.createTextNode(label));
	   button.addEventListener('click', function(e) {
	      // Set all buttons to inactive
	      subtitleMenuButtons.map(function(v, i, a) {
		 subtitleMenuButtons[i].setAttribute('data-state', 'inactive');
	      });
	      // Find the language to activate
	      var lang = this.getAttribute('lang');
	      for (var i = 0; i < video.textTracks.length; i++) {
		 // For the 'subtitles-off' button, the first condition will never match so all will subtitles be turned off
		 if (video.textTracks[i].language == lang) {
		    video.textTracks[i].mode = 'showing';
		    this.setAttribute('data-state', 'active');
         }
         else {
            video.textTracks[i].mode = 'hidden';
         }
      	}
        subtitlesMenu.style.display = 'none';
        });
        subtitleMenuButtons.push(button);
        return listItem;
	}
	subtitles.addEventListener('click', function(e) {
   		if (subtitlesMenu) {
      		subtitlesMenu.style.display = (subtitlesMenu.style.display == 'block' ? 'none' : 'block');
   		}
	});
</script>
</body>
</html>	
